# Variables
:host = 127.0.0.1
:headers = <<
Content-Type: application/json
Accept: application/json, */*
#

# CheckEligibility that will trigger aditional authentication methods
# account number used: 5555 5555 5555 4444
POST http://:host:8080/mdes/digitization/1/0/checkEligibility
:headers

{
  "paymentAppInstanceId": "123123123",
  "cardInfo": {
    "encryptedData": "95B72A4BCF15AA74D3E9415A63EF5BE5083C2B28CC173D4AFAC4646C9EF63CBC4512F84BB608AC1D71F3FD56409BCBBF",
    "oaepHashingAlgorithm": "SHA512",
    "publicKeyFingerprint": "000000",
    "iv": "B5DFABBC7F0EE88CC82518DE98A4065B",
    "encryptedKey": "8F8B823D06EB48370B006D140C3E2521D44645821C924A9CC8A1809170544F91D861B5AA268211B919FA80C1EB0B468C41116F174A2964610723C5FA56472C4BA21FA78F21C0967A2D2F96F9CA5878DFC3DCFE981C49B1C91E8A163D9C588C7A9720702099232E0E316AEC832B571C3AC765A3D2A58C1E62D3199B0706085537F3E548BAFA8828ED96BFC50133E1F2AD904C46DD449D9203517EBDB697AA2419E4C513BD473DD62C2630C6C2399AC7A68B147DD6E70DE6DEF6A7174D88DA4B5D7524D2D68F48B8E7133E3D476DF6507E6FF23933172FDF177A03B6C65003F7917A4DFEFAB93238C19797E52FF3A919A7673F3BCE4E5CBD422A691E70BBC96225527857DEAE01F5E25746684A0E513CAB171A7F138A504C3D43FA481D4F94447F4B3B4B537B5A7D0C32579D560E6343FBA5010E9758CE9856F896BFED77B6108B18E16961EB1050EECDF066A575461E2A45559AE0703113704CB7B0F7B16FD1E52AB143E3ACFBA76926B46D0285EC9959693536B965B3C0DBB4DBB68ECF9D4B812EF25334EB8B33A488AD107BF56AC36072C0DB02F38DD97BEE7DD7D2B5710D37FE2BD0E55D931566C02BA4309CBD9681B6856516B73E226062233B77626A5D4E841CF62CA32F5E4AD99B81A2F02EE84748F891A4B5E3CAF987E074F3D3EC070C823A1AA56744D2DB7CADFC1474FA8893712945D54FDD4E00636D905D243B48C2"
  }
}

#
# Digitize for the previous CheckEligibility
# The responseHost url is used to send back the provision data
#
POST http://:host:8080/mdes/digitization/1/0/digitize
:headers

{
  "responseHost": "http://localhost:3000",
  "paymentAppInstanceId": "123123123"
}

# CheckEligibility that will NOT trigger additional authentication methods
# account number used: 5200 8282 8282 8210
POST http://:host:8080/mdes/digitization/1/0/checkEligibility

{
  "paymentAppInstanceId": "678678678",
  "cardInfo": {
    "encryptedData": "9652C69E4E2507CDF8674F7AD889F00895C7D8CCCD520DFE3D40CF1D0843E6695CF4CF339F1046BD3BE74AF1E8D207D1FFFE97D9980AB788A9978E73C73C95981BF2843AC117C57BF953043E65007DA490B28201E7F84A7BE645F7555FCF2B7ACD3CF3F29D7F2999C88D576C4EBA5238",
    "oaepHashingAlgorithm": "SHA512",
    "publicKeyFingerprint": "000000",
    "iv": "FB5F714D717BF564EB63A0108B46E6D3",
    "encryptedKey": "13AAB113A1D10E9EDD04F90AFB58A218B6AE1CD23A7B1BBF981D5E56A7392C2C0E5E532F7B196C6BD5416726D79C719233CA0DBC526DE772583BE586E8BE3250A219579337860EC27150E782BAD316569FC5E67E588A70B09C4E40F69B5C1B77392F1C7481BD3510EA781A4F4EF27FEEFA23C6E2A7FCCF66581449C0BDEA2144F0F30171F9980539E587F236C1CC00AD52922F344D9EB927B840B8975CBF587E754C2C7A563BD29FEED9660CFF08396D7122C2E2B899437D62598DFE9B4FB2E967104008CBF0DF8BDB44216EE318BB8AD8A052DD51D4CC820CA7652AA9B1C260224D8A7E3DC935E888C6DAAEFF263F3A2DD794BCE7E41E0B94D9142CCFBA165C7080B25BA69268FEAE64ED9DDA04D75C30689E72EE09EA36ED13EE132280F996F0C19C38C8ED3FC2367EAC42E77A5754EEBE284AFEF7494A129B8222BA4D690EC7E4562E1FDA270F1FD73A05B6DD1F5D653B1C66D158CC72723A95B1D4BC3F5BCC0207EC4C57C306339DA1330CC38FAB51EECDC3A84E2FB1372CDC4BA53BEE2D05FC3B3A34CB3DACDD8FBD1A2598CCA5A315B628B02AB705F9690E7CA02216B9749F810C08A67EFD832D2BC558FFD5B848F20E4C606D4236DE0051F0D18357A921CAA2D3F6FC9501865440886A7F59C82E80B1B79C9FFFD1C9E62C3278964B7974F0FA68D6CA3A39FB1B33F29A7364467496CE8520E6126A9670E6862BC5DFC3"
  }
}

#
# Digitize for the previous CheckEligibility
# The responseHost url is used to send back the provision data
#
POST http://:host:8080/mdes/digitization/1/0/digitize
:headers

{
  "responseHost": "http://localhost:3000",
  "paymentAppInstanceId": "678678678"
}

#
# Request activation code
#
POST http://:host:8080/mdes/digitization/1/0/requestActivationCode
:headers

{
  "responseHost": "http://localhost:3000",
  "requestId": "123456",
  "paymentAppInstanceId": "123123",
  "tokenUniqueReference": "DWSPMC00000123d72..",
  "authenticationMethod": {
    "id": 12344
  }
}

#
# Activate
# Activation of a request code (will trigger a notification and a provisioning)
#
POST http://:host:8080/mdes/digitization/1/0/activate
:headers

{
  "responseHost": "http://localhost:3000"
}

# Get card background combined asset
GET http://:host:8080/mdes/assets/1/0/asset/739d27e5-629d-11e3-949a-0800200c9a66
:headers

# Get terms and conditions asset
GET http://:host:8080/mdes/assets/1/0/asset/a9f027e5-629d-11e3-949a-0800200c9a66
:headers

# Suspend a list of tokens
POST http://:host:8080/mdes/digitization/1/0/suspend
:headers
{
  "paymentAppInstanceId": "e6ad3356-feec-4a8a-b360-dd2b2dbd6cc7",
  "tokenUniqueReferences": ["4"],
  "causedBy": "CARDHOLDER",
  "reason": "because I want to",
  "reasonCode": "OTHER"
}

# Unsuspend a list of tokens
POST http://:host:8080/mdes/digitization/1/0/unsuspend
:headers
{
  "paymentAppInstanceId": "e6ad3356-feec-4a8a-b360-dd2b2dbd6cc7",
  "tokenUniqueReferences": ["4"],
  "causedBy": "CARDHOLDER",
  "reason": "because I want to",
  "reasonCode": "OTHER"
}

# Delete a list of tokens
POST http://:host:8080/mdes/digitization/1/0/delete
:headers
{
  "paymentAppInstanceId": "e6ad3356-feec-4a8a-b360-dd2b2dbd6cc7",
  "tokenUniqueReferences": ["4", "3"],
  "causedBy": "CARDHOLDER",
  "reason": "because I want to",
  "reasonCode": "OTHER"
}
